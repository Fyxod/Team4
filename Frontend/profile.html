<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend+Exa:wght@100..900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="profile.css">
  <title>User Profile</title>
  
</head>
<body>
  <div class="sidebar">
    <h2>KONECT</h2>
    <a href="http://127.0.0.1:5500/Frontend/homepage.html">Home</a>
    <button onclick="toggleDropdown('amenities')">Amenities ▾</button>
    <div class="dropdown-content" id="amenities">
      <a href="http://127.0.0.1:5500/Frontend/marketplace.html">Marketplace</a>
      <a href="http://127.0.0.1:5500/Frontend/carpool.html">Transportation Pool</a>
      <a href="http://127.0.0.1:5500/Frontend/foodcircle.html">Food Circle</a>
      <a href="http://127.0.0.1:5500/Frontend/rental.html">Rental/Borrow</a>
    </div>
    <button onclick="toggleDropdown('academics')">Academics ▾</button>
    <div class="dropdown-content" id="academics">
      <a href="http://127.0.0.1:5500/Frontend/mini-gig.html">Mini Gigs</a>
      <a href="http://127.0.0.1:5500/Frontend/internship.html">Internship Board</a>
      <a href="http://127.0.0.1:5500/Frontend/study.html">Digital Study Room</a>
    </div>
  </div>

  <div class="main-content">
    <div class="profile-container">
      <h2>Welcome, <span id="username">User</span>!</h2>
      <p>Email: <span id="email">you@example.com</span></p>
      <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
  </div>

  <script>
    fetch('/profile-data')
      .then(res => res.json())
      .then(data => {
        document.getElementById('username').textContent = data.username;
        document.getElementById('email').textContent = data.email;
      })
      .catch(() => {
        alert("You're not logged in!");
        window.location.href = '/login.html';
      });

    function logout() {
      fetch('/logout').then(() => {
        window.location.href = '/login.html';
      });
    }

    function toggleDropdown(id) {
      const element = document.getElementById(id);
      element.style.display = element.style.display === 'block' ? 'none' : 'block';
    }
  </script>
</body>
</html>
